# TSE Indexer README

## Overview

This document outlines key aspects of the implementation of the Tiny Search Engine (TSE) Indexer, including assumptions made during development, deviations from the provided specifications (if any), and known limitations or areas where the implementation may not work as expected.

## Compilation and Usage

To compile the TSE Indexer and its accompanying test program, use the provided Makefile by running the following command in the terminal: `make`

This command will compile both the indexer and indextest executable programs. To clean up the build directory, you can use: `make clean`

### Running the Indexer
The indexer is executed with the following command:
`./indexer pageDirectory indexFilename`
* pageDirectory is the directory containing the pages to index, which must contain a .crawler file.
* indexFilename is the name of the file where the index should be written.

### Using indextest
After generating an index file with the indexer, you can test loading and saving the index file with indextest:

`./indextest oldIndexFilename newIndexFilename`
* oldIndexFilename is the name of the original index file produced by the indexer.
* newIndexFilename is the name of the new file where the index will be saved after loading.

## Assumptions

- **Document Format**: It is assumed that the documents stored in the `pageDirectory` follow the format specified by the TSE Crawler, with the first line being the URL, the second line the depth, and the remaining content being the page's HTML. Documents not adhering to this format may not be indexed correctly.

- **Word Normalization**: The process of word normalization converts all characters to lowercase. It is assumed that this approach is sufficient for the scope of this project, and more complex normalization (e.g., removing punctuation) is not required.

- **Input Validation**: The indexer assumes that the `pageDirectory` provided as input contains a `.crawler` file, indicating it was generated by the TSE Crawler. Directories without this file are not considered valid input.

- **Memory Availability**: The implementation assumes that there is sufficient memory available for its operations. Out-of-memory conditions are handled gracefully, but performance may degrade on systems with limited memory.

## Deviations from Specifications

- **Error Handling**: While the specifications provide a general guideline for error handling, this implementation includes additional checks and more detailed error messages to aid in troubleshooting, going beyond the basic requirements.

- **Index File Format**: The specifications outline a basic format for the index file. This implementation adheres closely to that format but includes additional validation to ensure the integrity of the data when the index is loaded for querying.

## Known Limitations

- **Concurrency**: The current implementation of the indexer does not support concurrent execution. Running multiple instances of the indexer on the same `pageDirectory` or index file simultaneously may lead to unpredictable results.

- In the `pagedir_load` function of the TSE Indexer, the standard error message for failing to open a file corresponding to a document ID is deliberately suppressed. This approach prevents cluttering the console with messages when the Indexer reaches the end of the sequence of document files, a situation that is expected and not indicative of an error. The suppression maintains clean output and efficient processing by the Indexer without impacting its functionality.
